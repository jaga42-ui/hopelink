import{r as o,A as k,u as C,j as e,B as R,C as E,w as P,x as S,f as F,t as L,y as A,L as G,z as t}from"./index-BWa_XzmO.js";import{a as f}from"./api-Dehz_W2t.js";const T=()=>{const[s,r]=o.useState({name:"",email:"",password:"",phone:"",activeRole:"donor",lat:null,lng:null}),[x,i]=o.useState(!1),[p,h]=o.useState(!1),{name:I,email:q,password:D,phone:O,activeRole:m,lat:u,lng:N}=s,{user:b,login:g}=o.useContext(k),n=C();o.useEffect(()=>{b&&n("/dashboard")},[b,n]);const c=a=>r({...s,[a.target.name]:a.target.value}),j=()=>{i(!0),navigator.geolocation?navigator.geolocation.getCurrentPosition(a=>{r({...s,lat:a.coords.latitude,lng:a.coords.longitude}),i(!1),t.success("GPS Location Pinned!")},()=>{i(!1),t.error("Please allow location access to continue.")}):(i(!1),t.error("Geolocation not supported by this device."))},v=async a=>{if(a.preventDefault(),!u||!N)return t.error("Please tap 'Pin My Location' first.");h(!0);try{const{data:l}=await f.post("/auth/register",s);g(l),t.success("Welcome to HopeLink!"),n("/dashboard")}catch(l){t.error(l.response?.data?.message||"Registration Failed")}finally{h(!1)}},y=()=>{if(!window.google)return t.error("Google secure login is still loading. Please try again in a second.");window.google.accounts.oauth2.initCodeClient({client_id:"400969745528-s5e5huqfh83jtj46dc6tf5cf1o76brcu.apps.googleusercontent.com",scope:"email profile",ux_mode:"popup",callback:async l=>{if(l.code){const w=t.loading("Creating Account...");try{const{data:d}=await f.post("/auth/google",{code:l.code});g(d),t.success(`Welcome to HopeLink, ${d.name}!`,{id:w}),n("/dashboard")}catch(d){t.error(d.response?.data?.message||"Registration Failed",{id:w})}}}}).requestCode()};return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 sm:p-8 bg-brand-gradient",children:e.jsxs("div",{className:"w-full max-w-lg bg-white/5 backdrop-blur-3xl border border-white/10 rounded-[2.5rem] p-6 sm:p-10 shadow-2xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-4xl font-black text-white italic tracking-tighter",children:["HOPE",e.jsx("span",{className:"text-teal-400",children:"LINK."})]}),e.jsx("p",{className:"text-white/40 font-bold uppercase tracking-widest text-[10px] mt-2",children:"Join the Network"})]}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(R,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-white/30"}),e.jsx("input",{type:"text",name:"name",placeholder:"Full Name",onChange:c,required:!0,className:"w-full bg-black/20 border border-white/10 rounded-2xl py-4 pl-12 pr-6 text-white outline-none focus:border-teal-500/50"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(E,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-white/30"}),e.jsx("input",{type:"tel",name:"phone",placeholder:"Phone Number",onChange:c,required:!0,className:"w-full bg-black/20 border border-white/10 rounded-2xl py-4 pl-12 pr-6 text-white outline-none focus:border-teal-500/50"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-white/30"}),e.jsx("input",{type:"email",name:"email",placeholder:"Email Address",onChange:c,required:!0,className:"w-full bg-black/20 border border-white/10 rounded-2xl py-4 pl-12 pr-6 text-white outline-none focus:border-teal-500/50"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(S,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-white/30"}),e.jsx("input",{type:"password",name:"password",placeholder:"Secure Password",onChange:c,required:!0,className:"w-full bg-black/20 border border-white/10 rounded-2xl py-4 pl-12 pr-6 text-white outline-none focus:border-teal-500/50"})]}),e.jsxs("div",{className:"pt-2",children:[e.jsx("p",{className:"text-white/50 text-[10px] uppercase font-black tracking-widest ml-2 mb-2",children:"Initial Role (You can switch later)"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>r({...s,activeRole:"donor"}),className:`flex-1 py-4 rounded-2xl font-black text-xs uppercase tracking-widest transition-all ${m==="donor"?"bg-teal-500 text-white shadow-lg shadow-teal-500/20":"bg-white/5 text-white/40"}`,children:"Donate"}),e.jsx("button",{type:"button",onClick:()=>r({...s,activeRole:"receiver"}),className:`flex-1 py-4 rounded-2xl font-black text-xs uppercase tracking-widest transition-all ${m==="receiver"?"bg-blue-500 text-white shadow-lg shadow-blue-500/20":"bg-white/5 text-white/40"}`,children:"Receive"})]})]}),e.jsxs("button",{type:"button",onClick:j,disabled:x,className:`w-full py-4 mt-2 rounded-2xl font-black flex items-center justify-center gap-2 transition-all border ${u?"bg-emerald-500/20 text-emerald-400 border-emerald-500/30":"bg-white/5 text-white/60 border-white/10 hover:bg-white/10"}`,children:[x?e.jsx(F,{className:"animate-spin"}):e.jsx(L,{}),u?"GPS SECURED":"PIN MY LOCATION (REQUIRED)"]}),e.jsx("button",{type:"submit",disabled:p||x,className:"w-full bg-white text-teal-900 py-5 rounded-2xl font-black text-lg shadow-xl hover:scale-[1.02] active:scale-95 transition-all mt-4",children:p?"CREATING...":"CREATE ACCOUNT"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"flex-1 border-t border-white/10"}),e.jsx("span",{className:"px-4 text-white/40 text-[10px] font-black uppercase tracking-widest",children:"Or"}),e.jsx("div",{className:"flex-1 border-t border-white/10"})]}),e.jsxs("button",{onClick:y,type:"button",className:"w-full bg-white/5 hover:bg-white/10 border border-white/10 text-white font-bold py-4 rounded-2xl transition-all flex items-center justify-center gap-3",children:[e.jsx(A,{className:"text-red-400 text-xl"})," Sign Up with Google"]})]}),e.jsxs("p",{className:"mt-6 text-center text-white/40 text-sm",children:["Already a member? ",e.jsx(G,{to:"/login",className:"text-teal-400 font-bold ml-1",children:"Sign In"})]})]})})};export{T as default};
